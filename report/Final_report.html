<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Final_report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Final_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="Final_report_files/libs/quarto-html/quarto.js"></script>
<script src="Final_report_files/libs/quarto-html/popper.min.js"></script>
<script src="Final_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Final_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="Final_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Final_report_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Final_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Final_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Final_report_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final_report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction-and-data" class="level1">
<h1>Introduction and Data</h1>
<p>The data set includes statistics from the 2024 Division 1 and 3 Men’s and Women’s Ultimate Frisbee Championships. The statistics were found on USA Ultimate, the non-profit organization serving as the governing body for ultimate in the United States, and were taken from a data visualization titled “USA Ultimate 2024 Nationals Stats Dashboard”, which was created by Ben Ayres. The data set includes 1665 rows which each correspond to an individual player, and it includes 15 variables which categorize the players by Division, Gender, and Team, and provide game statistics for each player.&nbsp;</p>
<p>Ultimate frisbee is a sport growing in popularity at the collegiate level and within the Vassar student body as well. However, not much data analysis is available for Ultimate compared to other popular sports. We want to fit a model that would help players analyze their game performance. Therefore, via linear, LASSO, and ridge regression we will fit a prediction model that we train under supervised conditions to be able to predict a player’s plus/minus score (AKA individual impact, calculated as the difference between the points scored and the points allowed while the player is on the court) based on the variables turns_per_game, ds_per_game, ast_per_game, and pts_per_game. These variables all relate to a player’s effectiveness on the field, which is why we will use them to predict pls_mns_per_game. We will also stratify by division and gender, so that we ensure that we have an accurate model for each group. We will have four models in the final product, DI Men, DI Women, DIII Men, and DIII Women.</p>
<p>Since the data was already pretty clean, we did not have to do much data tidying. We just did some string manipulation to extract the school name from the team name, creating a new column called ‘school’, and had to convert some character variables to factors.</p>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="summary-statistics" class="level3">
<h3 class="anchored" data-anchor-id="summary-statistics"><em>Summary Statistics</em></h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> pls_mns_per_game  turns_per_game     ds_per_game      ast_per_game   
 Min.   :-8.8333   Min.   : 0.0000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.: 0.0000   1st Qu.: 0.0000   1st Qu.:0.0000   1st Qu.:0.0000  
 Median : 0.2000   Median : 0.4000   Median :0.2000   Median :0.1667  
 Mean   : 0.4430   Mean   : 0.9229   Mean   :0.3543   Mean   :0.5050  
 3rd Qu.: 0.8333   3rd Qu.: 1.1667   3rd Qu.:0.5000   3rd Qu.:0.6000  
 Max.   : 5.8750   Max.   :14.8333   Max.   :7.1667   Max.   :7.6000  
  pts_per_game   
 Min.   :0.0000  
 1st Qu.:0.0000  
 Median :0.2000  
 Mean   :0.5066  
 3rd Qu.:0.7143  
 Max.   :4.4000  </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                 pls_mns_per_game turns_per_game ds_per_game ast_per_game
pls_mns_per_game        1.0000000     -0.2626174   0.1892149    0.3830593
turns_per_game         -0.2626174      1.0000000   0.6852003    0.6550684
ds_per_game             0.1892149      0.6852003   1.0000000    0.5028222
ast_per_game            0.3830593      0.6550684   0.5028222    1.0000000
pts_per_game            0.6805235      0.2856562   0.4187957    0.4498837
                 pts_per_game
pls_mns_per_game    0.6805235
turns_per_game      0.2856562
ds_per_game         0.4187957
ast_per_game        0.4498837
pts_per_game        1.0000000</code></pre>
</div>
</div>
</section>
<section id="visualizationseda" class="level3">
<h3 class="anchored" data-anchor-id="visualizationseda"><em>Visualizations/EDA</em></h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Final_report_files/figure-html/gender-&amp;-plus-minus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Final_report_files/figure-html/plus-minus-&amp;-other-variable-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Final_report_files/figure-html/plus-minus-&amp;-other-variable-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Final_report_files/figure-html/plus-minus-&amp;-other-variable-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Final_report_files/figure-html/plus-minus-&amp;-other-variable-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="modeling-methodology" class="level2">
<h2 class="anchored" data-anchor-id="modeling-methodology">Modeling methodology</h2>
<p>We are fitting all three models that predict continuous variables: linear, LASSO, and ridge regression. Based on the results, we will select the model that is most accurate. From the scatter plots for our four predictor variables against the outcome variable of +/-, we see a fairly linear relationship between the variables. For pts_per_game, all of the relationships are positively linear. For ds_per_game and ast_per_game, all of the relationships are positive except for Division 3 Women. Additionally, for turns_per_game, the regression lines for both Division 1 and 3 have negative slopes. These differences, along with the slight variations in the box plots for player’s +/- score by Division and Gender, suggest that these predictors act differently by Division and Gender. Therefore, we will fit the model for each combination of division and gender, rather than utilizing a blanket model for all types of players.</p>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="linear-regression" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression"><em>Linear Regression</em></h3>
<section id="function-to-fit-model-by-division-and-gender" class="level4">
<h4 class="anchored" data-anchor-id="function-to-fit-model-by-division-and-gender">Function to Fit Model by Division and Gender</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Division 1 Men — Mean R² (CV): 0.799 (n=521)
  Coefficients:
    turns_per_game: -0.634
    ds_per_game: 0.450
    ast_per_game: 1.106
  Intercept: 0.708

Division 1 Women — Mean R² (CV): 0.753 (n=452)
  Coefficients:
    turns_per_game: -1.620
    ds_per_game: 0.804
    ast_per_game: 1.074
  Intercept: 0.321

Division 3 Men — Mean R² (CV): 0.707 (n=372)
  Coefficients:
    turns_per_game: -0.935
    ds_per_game: 0.663
    ast_per_game: 1.063
  Intercept: 0.604

Division 3 Women — Mean R² (CV): 0.788 (n=320)
  Coefficients:
    turns_per_game: -2.516
    ds_per_game: 1.034
    ast_per_game: 1.113
  Intercept: -0.105</code></pre>
</div>
</div>
</section>
</section>
<section id="ridge-regression" class="level3">
<h3 class="anchored" data-anchor-id="ridge-regression"><em>Ridge Regression</em></h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Division 1 Men — Mean R² (CV): 0.799 (n=521)
  Coefficients:
    turns_per_game: -0.633
    ds_per_game: 0.450
    ast_per_game: 1.105
  Intercept: 0.708

Division 1 Women — Mean R² (CV): 0.754 (n=452)
  Coefficients:
    turns_per_game: -1.618
    ds_per_game: 0.803
    ast_per_game: 1.072
  Intercept: 0.321

Division 3 Men — Mean R² (CV): 0.707 (n=372)
  Coefficients:
    turns_per_game: -0.932
    ds_per_game: 0.663
    ast_per_game: 1.061
  Intercept: 0.604

Division 3 Women — Mean R² (CV): 0.788 (n=320)
  Coefficients:
    turns_per_game: -2.512
    ds_per_game: 1.032
    ast_per_game: 1.111
  Intercept: -0.106</code></pre>
</div>
</div>
</section>
<section id="lasso-regression" class="level3">
<h3 class="anchored" data-anchor-id="lasso-regression"><em>Lasso Regression</em></h3>
</section>
<section id="function-grouped-by-division-and-gender" class="level2">
<h2 class="anchored" data-anchor-id="function-grouped-by-division-and-gender">Function grouped by division and gender</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Division 1 Men — Mean R² (CV): 0.799 (n=521)
  Coefficients:
    turns_per_game: -0.629
    ds_per_game: 0.448
    ast_per_game: 1.101
  Intercept: 0.708

Division 1 Women — Mean R² (CV): 0.754 (n=452)
  Coefficients:
    turns_per_game: -1.615
    ds_per_game: 0.802
    ast_per_game: 1.070
  Intercept: 0.321

Division 3 Men — Mean R² (CV): 0.707 (n=372)
  Coefficients:
    turns_per_game: -0.928
    ds_per_game: 0.661
    ast_per_game: 1.057
  Intercept: 0.604

Division 3 Women — Mean R² (CV): 0.782 (n=320)
  Coefficients:
    turns_per_game: -2.461
    ds_per_game: 1.006
    ast_per_game: 1.075
  Intercept: -0.107</code></pre>
</div>
</div>
<p>#print results</p>
<div class="cell">
<div class="cell-output-display">
<div id="cmyvwgddvn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cmyvwgddvn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cmyvwgddvn thead, #cmyvwgddvn tbody, #cmyvwgddvn tfoot, #cmyvwgddvn tr, #cmyvwgddvn td, #cmyvwgddvn th {
  border-style: none;
}

#cmyvwgddvn p {
  margin: 0;
  padding: 0;
}

#cmyvwgddvn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cmyvwgddvn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cmyvwgddvn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cmyvwgddvn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cmyvwgddvn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmyvwgddvn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmyvwgddvn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmyvwgddvn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cmyvwgddvn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cmyvwgddvn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cmyvwgddvn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cmyvwgddvn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cmyvwgddvn .gt_spanner_row {
  border-bottom-style: hidden;
}

#cmyvwgddvn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cmyvwgddvn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cmyvwgddvn .gt_from_md > :first-child {
  margin-top: 0;
}

#cmyvwgddvn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cmyvwgddvn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cmyvwgddvn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cmyvwgddvn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cmyvwgddvn .gt_row_group_first td {
  border-top-width: 2px;
}

#cmyvwgddvn .gt_row_group_first th {
  border-top-width: 2px;
}

#cmyvwgddvn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmyvwgddvn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cmyvwgddvn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cmyvwgddvn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmyvwgddvn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmyvwgddvn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cmyvwgddvn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cmyvwgddvn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cmyvwgddvn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmyvwgddvn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmyvwgddvn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmyvwgddvn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmyvwgddvn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmyvwgddvn .gt_left {
  text-align: left;
}

#cmyvwgddvn .gt_center {
  text-align: center;
}

#cmyvwgddvn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cmyvwgddvn .gt_font_normal {
  font-weight: normal;
}

#cmyvwgddvn .gt_font_bold {
  font-weight: bold;
}

#cmyvwgddvn .gt_font_italic {
  font-style: italic;
}

#cmyvwgddvn .gt_super {
  font-size: 65%;
}

#cmyvwgddvn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cmyvwgddvn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cmyvwgddvn .gt_indent_1 {
  text-indent: 5px;
}

#cmyvwgddvn .gt_indent_2 {
  text-indent: 10px;
}

#cmyvwgddvn .gt_indent_3 {
  text-indent: 15px;
}

#cmyvwgddvn .gt_indent_4 {
  text-indent: 20px;
}

#cmyvwgddvn .gt_indent_5 {
  text-indent: 25px;
}

#cmyvwgddvn .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#cmyvwgddvn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Cross-validated R-sqaured values</th>
</tr>
<tr class="gt_col_headings even">
<th id="level" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">level</th>
<th id="gender" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">gender</th>
<th id="Linear-Regression" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Linear Regression</th>
<th id="Lasso" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Lasso</th>
<th id="Ridge" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Ridge</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="level">Division 1</td>
<td class="gt_row gt_left" headers="gender">Men</td>
<td class="gt_row gt_right" headers="Linear Regression">0.7987</td>
<td class="gt_row gt_right" headers="Lasso">0.7988</td>
<td class="gt_row gt_right" headers="Ridge">0.7988</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="level">Division 1</td>
<td class="gt_row gt_left" headers="gender">Women</td>
<td class="gt_row gt_right" headers="Linear Regression">0.7535</td>
<td class="gt_row gt_right" headers="Lasso">0.7539</td>
<td class="gt_row gt_right" headers="Ridge">0.7537</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="level">Division 3</td>
<td class="gt_row gt_left" headers="gender">Men</td>
<td class="gt_row gt_right" headers="Linear Regression">0.7069</td>
<td class="gt_row gt_right" headers="Lasso">0.7067</td>
<td class="gt_row gt_right" headers="Ridge">0.7069</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="level">Division 3</td>
<td class="gt_row gt_left" headers="gender">Women</td>
<td class="gt_row gt_right" headers="Linear Regression">0.7884</td>
<td class="gt_row gt_right" headers="Lasso">0.7816</td>
<td class="gt_row gt_right" headers="Ridge">0.7881</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="prediction-model" class="level4">
<h4 class="anchored" data-anchor-id="prediction-model"><strong>Prediction Model</strong></h4>
<p>We can use our model to predict player impact based on historical performance statistics. For example, we can predict the plus/minus score of a Division 1 Male athlete with an average of 2.5 turns per game, 1.0 Ds per game, and 4.0 assists per game.</p>
<div class="cell">
<div class="cell-output-display">
<div id="futwsmdvyc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#futwsmdvyc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#futwsmdvyc thead, #futwsmdvyc tbody, #futwsmdvyc tfoot, #futwsmdvyc tr, #futwsmdvyc td, #futwsmdvyc th {
  border-style: none;
}

#futwsmdvyc p {
  margin: 0;
  padding: 0;
}

#futwsmdvyc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#futwsmdvyc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#futwsmdvyc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#futwsmdvyc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#futwsmdvyc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#futwsmdvyc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#futwsmdvyc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#futwsmdvyc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#futwsmdvyc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#futwsmdvyc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#futwsmdvyc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#futwsmdvyc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#futwsmdvyc .gt_spanner_row {
  border-bottom-style: hidden;
}

#futwsmdvyc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#futwsmdvyc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#futwsmdvyc .gt_from_md > :first-child {
  margin-top: 0;
}

#futwsmdvyc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#futwsmdvyc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#futwsmdvyc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#futwsmdvyc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#futwsmdvyc .gt_row_group_first td {
  border-top-width: 2px;
}

#futwsmdvyc .gt_row_group_first th {
  border-top-width: 2px;
}

#futwsmdvyc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#futwsmdvyc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#futwsmdvyc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#futwsmdvyc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#futwsmdvyc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#futwsmdvyc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#futwsmdvyc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#futwsmdvyc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#futwsmdvyc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#futwsmdvyc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#futwsmdvyc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#futwsmdvyc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#futwsmdvyc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#futwsmdvyc .gt_left {
  text-align: left;
}

#futwsmdvyc .gt_center {
  text-align: center;
}

#futwsmdvyc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#futwsmdvyc .gt_font_normal {
  font-weight: normal;
}

#futwsmdvyc .gt_font_bold {
  font-weight: bold;
}

#futwsmdvyc .gt_font_italic {
  font-style: italic;
}

#futwsmdvyc .gt_super {
  font-size: 65%;
}

#futwsmdvyc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#futwsmdvyc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#futwsmdvyc .gt_indent_1 {
  text-indent: 5px;
}

#futwsmdvyc .gt_indent_2 {
  text-indent: 10px;
}

#futwsmdvyc .gt_indent_3 {
  text-indent: 15px;
}

#futwsmdvyc .gt_indent_4 {
  text-indent: 20px;
}

#futwsmdvyc .gt_indent_5 {
  text-indent: 25px;
}

#futwsmdvyc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#futwsmdvyc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="ridge_prediction" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ridge_prediction</th>
<th id="linear_prediction" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">linear_prediction</th>
<th id="lasso_prediction" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">lasso_prediction</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="ridge_prediction">4.626153</td>
<td class="gt_row gt_right" headers="linear_prediction">4.627888</td>
<td class="gt_row gt_right" headers="lasso_prediction">4.620286</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Predictions for Division 1 Male Player:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ridge Prediction: 4.626"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Linear Prediction: 4.628"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Lasso Prediction: 4.620"</code></pre>
</div>
</div>
<p>All three models predict that this player has a plus/minus of approximately 4.3 (pretty good!). The models behave similarly, but have slight variations in prediction.</p>
</section>
<section id="discussion-and-conclusion" class="level4">
<h4 class="anchored" data-anchor-id="discussion-and-conclusion">Discussion and Conclusion</h4>
<p>In this project, we explored the feasibility of building a predictive model to estimate a player’s plus-minus score in college Ultimate Frisbee based on individual game statistics: turnovers per game, defensive blocks per game, and assists per game. We implemented three distinct regression models—Linear Regression, Ridge Regression, and Lasso Regression—to evaluate how well these features could predict the target outcome.</p>
<p>Both <strong>Linear</strong> and <strong>Ridge Regression</strong> models produced very similar predictions across multiple gender-division combinations, suggesting that the underlying relationships in the data are fairly linear and do not require strong regularization to prevent overfitting.</p>
<p>In contrast, <strong>Lasso Regression</strong> consistently underperformed. For example, when provided with the input player_stats = { ‘turns_per_game’: 2.1, ‘ds_per_game’: 1.8, ‘ast_per_game’: 3.2, ‘pts_per_game’: 5.4 } its predicted plus-minus score was Ridge: 8.28, Linear: 8.30 and Lasso: 0.68. This significant deviation from the other two models suggests that Lasso may be overly aggressive in shrinking coefficients to zero—likely eliminating valuable predictors entirely. Given that we only have four features, the benefits of Lasso’s feature selection are minimal, and its use may be unwarranted in this case.</p>
</section>
<section id="methodological-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="methodological-evaluation">Methodological Evaluation</h3>
<p>To ensure consistent model evaluation, we split the dataset by both <strong>division (D-I vs.&nbsp;D-III)</strong> and <strong>gender (men’s vs.&nbsp;women’s)</strong>, and trained separate models for each subgroup. This decision was grounded in the understanding that the dynamics of ultimate frisbee can vary substantially across these categories, and that a model trained on pooled data might obscure those differences.</p>
</section>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<ol type="1">
<li><strong>Small feature set</strong>: Only three predictor variables were used. While these are intuitively related to performance, plus-minus is inherently a team-dependent metric influenced by many contextual factors (e.g., opponent strength, line composition, playing time) that are not captured here.</li>
<li><strong>Potential data imbalance</strong>: The performance of the models across different (division, gender) groups could vary depending on how many observations we had per group. If some subgroups had fewer examples, model stability would be affected.</li>
<li><strong>No non-linear modeling</strong>: While most of the relationships we observe appear somewhat linear in exploratory analysis, fitting a nonlinear model, such as a random forest, may be a better analysis route.</li>
</ol>
<section id="data-reliability-and-validity" class="level3">
<h3 class="anchored" data-anchor-id="data-reliability-and-validity">Data Reliability and Validity</h3>
<p>The dataset was sourced from a publicly available website and published within the past year. While not a first-party dataset, its reliability is bolstered by several key factors:</p>
<ol type="1">
<li>It reflects official statistics from the most recent USA Ultimate College National Championships, meaning it’s drawn from the highest college-level competition.</li>
<li>As active Frisbee players ourselves, we were able to recognize nearly all the teams listed and even some individual players, affirming the data’s authenticity and face validity.</li>
<li>The dataset has had multiple downloads from the site, indicating community engagement and a degree of scrutiny.</li>
</ol>
</section>
<section id="appropriateness-of-the-analysis" class="level3">
<h3 class="anchored" data-anchor-id="appropriateness-of-the-analysis">Appropriateness of the Analysis</h3>
<p>Our analytical choices—using regularized regression methods and controlling for gender and division—are appropriate given our objective and dataset size. We standardized our features using <code>StandardScaler()</code> and implemented a consistent 80/20 train-test split across all models (as shown in the <code>lasso_reg</code> function), which helped avoid data leakage and ensured fair comparison between models.</p>
<p>Using multiple models allowed us to assess the sensitivity of plus-minus predictions to different regularization schemes. Ridge, in particular, proved effective in slightly dampening noisy relationships while preserving feature contributions.</p>
</section>
</section>
<section id="ethical-considerations" class="level2">
<h2 class="anchored" data-anchor-id="ethical-considerations">Ethical Considerations</h2>
<p>Benefits:</p>
<ul>
<li><p>Enhanced Performance Insights: Our model can provide players and coaches with data-driven insights, potentially informing training and strategy.</p></li>
<li><p>Objective Evaluation: By quantifying performance metrics, we aim to reduce subjective biases in player assessments.</p></li>
</ul>
<p>Risks:</p>
<ul>
<li><p>Privacy Concerns: Even though our data is publicly available, using it for predictive modeling raises questions about consent and the extent to which athletes are aware of or agree to such analyses.</p></li>
<li><p>Potential for Misuse: There’s a risk that our model could be used to make decisions about player selection or playing time without considering the broader context of an athlete’s performance or potential.</p></li>
<li><p>Bias and Fairness: If our model inadvertently reflects existing biases in the data, it could perpetuate inequalities, especially if used in decision-making processes.</p></li>
</ul>
<p>Overall, this project demonstrates the potential of data-driven approaches to enhance our understanding of individual performance in Ultimate Frisbee. While our models show promise within the scope of elite college-level play, future work must address broader data inclusion to effective application.</p>
</section>
<section id="what-we-would-have-done-differently" class="level2">
<h2 class="anchored" data-anchor-id="what-we-would-have-done-differently">What We Would Have Done Differently</h2>
<p>If we were to restart the project, we would do far more a rigorous analysis of the variables used. While all the variables currently chosen did show evidence affecting the target variable, some additional work in order to confirm that these four are the most influencial out of all the possible options would have further. We also could have included non-linear modeling techniques, incorporated data from other tournaments/countries/years, and evaluated the impact of region, school, school size, and other variables on plus/minus.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>